# Update memory bank with following rules

## Backend:

## Role and Expertise
You are an expert Python developer with extensive experience in Temporal.io for workflow orchestration. Your code is clean, efficient, and adheres to best practices in workflow and activity implementation.

## Coding Standards

### General Principles
- Write concise, readable Python code.
- Follow PEP 8 and PEP 257 for style and documentation.
- Use Python type hints in all functions and methods.
- Document all workflows and activities using descriptive docstrings.

### Temporal.io Best Practices
- Use `@workflow.defn` and `@activity.defn` decorators on all workflows and activities.
- Name workflows with a `_workflow` suffix (e.g., `process_order_workflow`).
- Name activities with an `_activity` suffix (e.g., `send_email_activity`).

### Naming Conventions
- **Variables and Functions**: snake_case
- **Classes**: PascalCase
- **Files**: snake_case
- **Workflows and Activities**:
  - Workflows: snake_case ending with `_workflow`.
  - Activities: snake_case ending with `_activity`.

### Error Handling
- Always wrap activities with proper try-except blocks.
- Log errors with context using Python's `logging` module.
- Use Temporal's built-in error handling for retries and timeouts.

## Project Structure
Organize the project with clear separation of concerns:
- **workflows/**: Define all Temporal workflows here.
- **activities/**: Implement all activity definitions.
- **tests/**: Place unit tests and integration tests in this directory.
- **utils/**: Include reusable utilities and helpers.

## Dependencies
- Ensure `temporalio` is listed in dependencies.
- Avoid usage of `celery` or any conflicting task queue systems.

## Documentation Standards
- Use Python docstrings for all workflows and activities:
  ```python
  @workflow.defn
  class ProcessOrderWorkflow:
      """Workflow for processing an order."""
  ```

## Testing Standards
- Write tests for all workflows and activities using `pytest`.
- Mock Temporal APIs where needed for isolated testing.
- Maintain at least 80% code coverage.

## CI/CD Integration
- Use GitHub Actions to automate testing and deployment.
- Include the following checks:
  - Linting with `flake8`.
  - Type checking with `mypy`.
  - Unit testing with `pytest`.

## Code Examples

### Workflow Example
```python
from temporalio import workflow

@workflow.defn
class ProcessOrderWorkflow:
    """Workflow to process customer orders."""

    @workflow.run
    async def run(self, order_id: str):
        await workflow.execute_activity(
            "send_email_activity", order_id, start_to_close_timeout=timedelta(seconds=30)
        )
```

### Activity Example
```python
from temporalio import activity

@activity.defn
async def send_email_activity(order_id: str):
    """Send a confirmation email for an order."""
    try:
        # Simulate sending email
        pass
    except Exception as e:
        activity.logger.error(f"Failed to send email for order {order_id}: {str(e)}")
        raise



=============================

I need to review the current memory bank files to understand the project context and then update them with the new backend rules. Let me start by reading all the memory bank files.


I've now reviewed all the memory bank files and understand the current state of the project. The task is to update the memory bank with new backend rules focusing on Temporal.io integration. This will primarily affect systemPatterns.md and techContext.md, with some updates needed in activeContext.md and progress.md to reflect the new workflow system implementation.

Let me present a plan for updating the memory bank files.


I've reviewed all memory bank files and have a plan for incorporating the new backend rules. Here's how I propose to update each relevant file:

> systemPatterns.md
Add new section for Temporal.io workflow patterns
Update backend architecture diagram to include workflow components
Add workflow and activity patterns section
Include code organization standards for workflows/activities
> techContext.md
Add Temporal.io to core backend technologies
Update development setup with Temporal worker configuration
Add new section for workflow-specific technical constraints
Update dependencies to include temporalio
> activeContext.md
Add current workflow implementation status
Update technical considerations for workflow orchestration
Add workflow-related next steps
Update architecture decisions to reflect Temporal adoption
> progress.md
Add new section for workflow implementation progress
Update backend tasks to include workflow development
Add known issues section for workflow-related challenges
Update next release goals to include workflow orchestration
